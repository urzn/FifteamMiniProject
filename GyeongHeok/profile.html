<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <title>ì¥ê²½í˜ ìê¸°ì†Œê°œ</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="carousel.css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=42dot+Sans:wght@300..800&family=Gowun+Dodum&family=Noto+Sans+KR:wght@100..900&family=Single+Day&family=Yeon+Sung&display=swap">

  <link href="https://fonts.googleapis.com/css2?family=Bungee+Inline&display=swap" rel="stylesheet">


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Yeon+Sung+Script&display=swap');

    .carousel-control-prev,
    .carousel-control-next {
      top: 50%;
      transform: translateY(-50%);
      height: 50px;
      width: 50px;
      z-index: 5;
    }

    main {
      padding-top: 70px;
    }

    .intro-section {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px 20px;
      font-family: "Yeon Sung", system-ui;
      font-size: 20px;
    }

    .profile-img {
      width: 300px;
      height: 300px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #ddd;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .carousel {
      max-width: 700px;
    }

    .intro-text {
      text-align: center;
      padding: 20px;
      max-width: 800px;
    }

    .carousel-control-prev,
    .carousel-control-next {
      filter: invert(100%);
      width: 40px;
      height: 40px;
    }


    .image_select {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }

    .image_select img {
      width: 150px;
      height: 120px;
      border: 3px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      transition: border 0.2s ease;
    }

    .selected-image {
      box-shadow: 0 0 20px blue;
    }

    .center-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 610px;
      padding: 20px;
    }

    .image_select p {
      font-size: 14px;
      font-family: gowun-daum;
    }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyBO_zKay6RtbjJuOnoSm5Wl_y7fz1HjBuE",
      authDomain: "sparta-bf244.firebaseapp.com",
      projectId: "sparta-bf244",
      storageBucket: "sparta-bf244.firebasestorage.app",
      messagingSenderId: "644606837659",
      appId: "1:644606837659:web:e4ec6ed32f52e9249b173e",
      measurementId: "G-FR9RY9V6M9"
    };

    // Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let selected_num = [];

    $('.image_select img').click(function () {
      if ($(this).hasClass("selected-image")) {
        $(this).removeClass("selected-image");

        const index = selected_num.indexOf($(this).data("num"));
        selected_num.splice(index, 1);
      }
      else {
        $(this).addClass("selected-image");
        selected_num.push($(this).data("num"));
      }

    })

    $('#submitBtn').click(async function () {
      if (!selected_num.length) {
        alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”");
      }
      else {
        let doc = { "gameNum": selected_num }
        await addDoc(collection(db, "games"), doc);
        alert("ì„ íƒ ì™„ë£Œ");
        window.location.reload();
      }
    })

    let count = {};
    let docs = await getDocs(collection(db, "games"));
    docs.forEach((doc) => {
      let data = doc.data();
      let nums = data.gameNum;

      for (let num of nums) {
        if (count[num]) {
          count[num]++;
        } else {
          count[num] = 1;
        }
      }
    });

    for (let num in count) {
      $(`#count${num}`).text(`â¤ï¸${count[num]}`);
    }

  </script>

</head>

<body>
  <header data-bs-theme="dark">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html"
          style="font-family: 'Bungee Inline', sans-serif; font-size:25px;">FIFTEAM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse" style="font-family:'KorailRoundGothicBold';">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="../index.html#myCarousel">íŒ€ ì†Œê°œ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../index.html#members">íŒ€ì› ì†Œê°œ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../index.html#guestbook">ë°©ëª…ë¡</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main>

    <div class="d-flex align-items-center gap-4 p-4 intro-section">
      <img src="image/ì¥ê²½í˜ì‚¬ì§„.jpg" alt="í”„ë¡œí•„ ì´ë¯¸ì§€" class="profile-img" />

      <div id="textCarousel" class="carousel slide w-100">
        <div class="carousel-inner">

          <div class="carousel-item active">
            <div class="center-wrapper">
              <div class="intro-text">
                <h2>ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš” 15ì¡° íŒ€ì› ì¥ê²½í˜ì…ë‹ˆë‹¤</h2><br>
                <p>ì €ëŠ” ë‚¯ì„ ë§ì´ ê°€ë¦¬ëŠ” í¸ì´ì§€ë§Œ, ì–´ìƒ‰í•œ ìƒí™©ì„ ì¤„ì´ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>
                  ë§ì´ ì¹œí•´ì§€ë©´ ë˜˜ë¼ìˆë‹¤ëŠ” ì–˜ê¸°ë„ ì¢…ì¢… ë“£ê³ ëŠ” í–ˆìŠµë‹ˆë‹¤.</p>
              </div>
            </div>
          </div>

          <div class="carousel-item">
            <div class="center-wrapper">
              <div class="intro-text">
                <h2>ğŸ’­ ì œê°€ ìƒê°í•˜ëŠ” ì œ ì¥ì ì€ìš”..</h2><br>
                <p>ì£¼ë³€ ë¶„ìœ„ê¸°ì— ì˜í–¥ì„ ì˜ ë°›ëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.<br>
                  ë¬¼ë¡  ì´ëŠ” ë‹¨ì ì´ ë  ìˆ˜ë„ ìˆê² ì§€ë§Œ ì „ ì‚´ë©´ì„œ ì¥ì ì´ ëœ ê²½ìš°ê°€ ë” ë§ì•˜ì–´ìš”!<br>

                </p>
              </div>
            </div>
          </div>

          <div class="carousel-item">
            <div class="center-wrapper">
              <div class="intro-text">
                <h2>ğŸ® ì œê°€ ì¢‹ì•„í•˜ëŠ” ê²ƒ</h2><br>
                <p style="line-height: 1.2;">ìµœê·¼ì—ëŠ” ì˜ ì•ˆí•˜ì§€ë§Œ ì–´ë ¸ì„ ì ë¶€í„° ê²Œì„ì„ ì¢‹ì•„í–ˆê³  ë‹¤ì–‘í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤.<br>
                  ê·¸ì¤‘ì—ì„œë„ íŠ¹íˆ ì œê²Œ ê¸°ì–µì´ ë‚¨ëŠ” ê²Œì„ë“¤ì„ ê³¨ë¼ë´¤ìŠµë‹ˆë‹¤.<br>
                  ì—¬ëŸ¬ë¶„ë“¤ì€ ì–´ë–¤ê°€ìš”? ê²Œì„ì˜ ì´ë¯¸ì§€ë¥¼ ì—¬ëŸ¿ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <div class="image_select">
                  <div>
                    <img src="image/image1.jpg" data-num="1" />
                    <p id="count1"></p>
                  </div>
                  <div>
                    <img src="image/image2.jpg" data-num="2" />
                    <p id="count2"></p>
                  </div>
                  <div>
                    <img src="image/image3.jpg" data-num="3" />
                    <p id="count3"></p>
                  </div>
                  <div>
                    <img src="image/image4.jpg" data-num="4" />
                    <p id="count4"></p>
                  </div>
                  <div>
                    <img src="image/image5.jpg" data-num="5" />
                    <p id="count5"></p>
                  </div>
                </div>
                <button class="btn btn-primary" id="submitBtn">ì„ íƒí•œ ê²Œì„ ì œì¶œ</button>
              </div>
            </div>
          </div>

        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#textCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#textCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      </div>
    </div>

    <!-- <footer class="container">
      <p class="float-end"><a href="#">Back to top</a></p>
      <p>&copy; 2024 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
    </footer> -->

  </main>
</body>

</html>