<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <title>FIFTEAM ì†Œê°œ</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="carousel.css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=42dot+Sans:wght@300..800&family=Gowun+Dodum&family=Noto+Sans+KR:wght@100..900&family=Single+Day&family=Yeon+Sung&display=swap">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <style>
    .carousel-caption {
      position: absolute;
      z-index: 10;
      /* ê¸€ìê°€ ê°€ì¥ ìœ„ì— ì˜¤ê²Œ */
      color: white;
    }

    .carousel-control-prev,
    .carousel-control-next {
      top: 50%;
      transform: translateY(-50%);
      height: 50px;
      width: 50px;
      z-index: 5;
      /* captionë³´ë‹¤ ë‚®ê²Œ */
    }

    body {
      font-family: "Gowun Dodum", sans-serif;
    }

    .equal-height {
      height: 16%;
    }

    .selected-card {
      background-color: #f0f0f0;
    }

    .topBtn {
      display: inline-block;
      float: right;
      margin: -50px 5px 0;
    }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyBO_zKay6RtbjJuOnoSm5Wl_y7fz1HjBuE",
      authDomain: "sparta-bf244.firebaseapp.com",
      projectId: "sparta-bf244",
      storageBucket: "sparta-bf244.firebasestorage.app",
      messagingSenderId: "644606837659",
      appId: "1:644606837659:web:e4ec6ed32f52e9249b173e",
      measurementId: "G-FR9RY9V6M9"
    };

    // Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // const imgLists = ["https://st3.depositphotos.com/1006318/17150/v/450/depositphotos_171508936-stock-illustration-avatar-profile-icon-male-faceless.jpg",
    //   "https://st3.depositphotos.com/1006318/17128/v/450/depositphotos_171287416-stock-illustration-male-avatar-profile-icon-round.jpg",
    //   "https://st3.depositphotos.com/1006318/17128/v/450/depositphotos_171287476-stock-illustration-female-avatar-profile-icon-round.jpg",
    //   "https://st3.depositphotos.com/1006318/17128/v/450/depositphotos_171287424-stock-illustration-male-avatar-profile-icon-round.jpg",
    //   "https://st3.depositphotos.com/1006318/17128/v/450/depositphotos_171287362-stock-illustration-male-avatar-profile-icon-round.jpg"
    // ]
    const imgLists = ["profile0.jpg", "profile1.jpg", "profile2.jpg", "profile3.jpg", "profile4.jpg"]

    let clickStatus = false;

    // ë‚ ì§œ/ì‹œê°„ ì²˜ë¦¬
    const now = new Date();
    // let timestamp = now.toLocaleString("ko-KR");

    $("#submitbtn").click(async function () {
      let imgNum = Math.floor(Math.random() * 5);
      let name = $('#name_input').val();
      let message = $('#message_input').val();

      if (clickStatus) {
        window.location.reload();
        alert("ìƒˆë¡œìš´ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!")
      }
      if (!name || !message) {
        alert("ì´ë¦„ê³¼ ë©”ì‹œì§€ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      let doc = {
        'name': name,
        'message': message,
        'createdAt': new Date(),
        'imgNum': imgNum
      };
      // ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ì¶”ê°€
      await addDoc(collection(db, "guestbook"), doc);
      alert("ë°©ëª…ë¡ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
      window.location.reload();
    })

    const q = query(collection(db, "guestbook"), orderBy("createdAt", "desc"));
    const querySnapshot = await getDocs(q);

    querySnapshot.forEach((doc) => {
      let row = doc.data();
      let createdAt = row.createdAt?.toDate(); // null-safe
      let timestamp = createdAt ? createdAt.toLocaleString("ko-KR")
        : "ì‘ì„±ì¼ ì—†ìŒ";
      let imgUrl = imgLists[row.imgNum];
      let temp_html = `<div class="card mb-2 shadow-sm d-flex flex-row align-items-start guestProfile" 
      data-name="${row.name}" data-message="${row.message}">
    <img src="ì‚¬ì§„/${imgUrl}" alt="í”„ë¡œí•„" class="rounded-circle m-3" width="50" height="50">
<div class="card-body">
  <div class="d-flex justify-content-between align-items-center">
    <h6 class="card-subtitle text-primary fw-bold mb-1">
      ${row.name}
    </h6>
    <small class="text-muted">${timestamp}</small>
  </div>
  <p class="card-text mb-0" style="display:none">${row.message}</p>
</div>
</div>`;

      $('#messages').append(temp_html);
    })

    $(document).on("click", ".guestProfile", function () {
      let name = $(this).data("name");
      let message = $(this).data("message");

      // ì…ë ¥ì°½ì— ê°’ ë„£ê¸°
      $('#name_input').val(name);
      $('#message_input').val(message);
      $("#message_input").attr("rows", 6);
      $("#message_input").attr("readonly", true);
      $('.title-text').text(name + "ë‹˜ì˜ ë°©ëª…ë¡");
      $("#name_input").attr("type", "hidden");
      // ëª¨ë“  ì¹´ë“œì—ì„œ 'selected-card' ì œê±°
      $(".guestProfile").removeClass("selected-card");
      // í´ë¦­ëœ ì¹´ë“œì—ë§Œ 'selected-card' ì¶”ê°€
      $(this).addClass("selected-card");

      clickStatus = true;
    });
  </script>


</head>

<body>
  <header data-bs-theme="dark">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="" style="font-family: 'Bungee Inline', sans-serif; font-size:25px;">FIFTEAM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse" style="font-family:'KorailRoundGothicBold';">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="#myCarousel">íŒ€ ì†Œê°œ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#members">íŒ€ì› ì†Œê°œ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#guestbook">ë°©ëª…ë¡</a>
            </li>
          </ul>
          <!--searchì‚­ì œ
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            -->
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div id="myCarousel" class="carousel slide mb-6" style="font-family: 'Gowun Dodum', sans-serif;">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true"
          aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        
        <div class="carousel-item active">
          <img src="ì‚¬ì§„/teampicture2.jpg" class="d-block w-100" alt="Slide 1">
          <div class="container">
            <div class="carousel-caption d-flex align-items-center gap-3 justify-content-start"
              style="color:rgb(232, 229, 225);top: auto; bottom: 20%; left: 6%; right: auto;">
              <h1 class="mb-0" style="font-family:'KorailRoundGothicBold'; font-weight: bolder; font-size: 100px;">
                FIFTEAM</h1>
              <div class="d-flex align-items-center" style="height: 95px;">
                <p class="opacity-35 mb-0 text-start" style="font-size: 25px; line-height: 1.5rem;">
                  Fifteamì€ Fifteenth Team ì´ë¼ëŠ” ì˜ë¯¸ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.<br>FIFTEAM ê°œë°œìë“¤ì˜ ì‹œì‘ì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
                <!--ë²„íŠ¼ì‚­ì œ<p><a class="btn btn-lg btn-primary" href="#">Sign up today</a></p> -->
              </div>
            </div>
          </div>
        </div>

        <div class="carousel-item ">
          <img src="ì‚¬ì§„/teampicture2.jpg" class="d-block w-100" alt="Slide 2">
          <div class="container">
            <div class="carousel-caption d-flex align-items-center gap-3 justify-content-start"
              style="color:rgb(232, 229, 225);top: auto; bottom: 20%; left: 6%; right: auto;">
              <h1 class="mb-0" style="font-family:'KorailRoundGothicBold'; font-weight: bolder; font-size: 100px;">
                FIFTEAM</h1>
              <div class="d-flex align-items-center " style="height: 95px; margin-left:15px;">
                <p class="opacity-35 mb-0 text-start" style="font-size: 20px; line-height: 2.0rem;">
                  15ì¡° ë°›ëŠ” ê°œë°œìê°€ ë˜ê³  ì‹¶ì€ ğŸ’¸FIFTEAMğŸ’¸ì…ë‹ˆë‹¤.<br>
                  ì²«ë‚ ì—” ê°•ì˜ë¥¼ ë“£ê³ , ë‘˜ì§¸ ë‚ ë¶€í„°ëŠ” ë°”ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í–ˆì–´ìš”.ğŸ’»ğŸ”¥<br>
                  ì„œë¡œ ì‘ì›í•˜ë©° ëê¹Œì§€ í•´ë‚´ìëŠ” ë‹¤ì§ìœ¼ë¡œ ì—´ì‹¬íˆ ë‹¬ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.<br>
                  ì˜ê²¬ë„ ììœ ë¡­ê²Œ ë‚˜ëˆ„ê³ , í”¼ë“œë°±ë„ ì ê·¹ì ìœ¼ë¡œ ì£¼ê³ ë°›ëŠ” ë¶„ìœ„ê¸°ì…ë‹ˆë‹¤.ğŸ’¬<br>
                  ê³µí†µëœ ëª©í‘œëŠ” ì„±ì¥í•˜ëŠ” ê°œë°œìê°€ ë˜ëŠ” ê²ƒğŸ’ªğŸ˜</p>
                <!--ë²„íŠ¼ì‚­ì œ<p><a class="btn btn-lg btn-primary" href="#">Sign up today</a></p> -->
              </div>
            </div>
          </div>
        </div>

        
        <div class="carousel-item">
          <img src="ì‚¬ì§„/teampicture11.jpg" class="d-block w-100 " alt="Slide 3" style="width:100%;height:100%;object-fit:cover;">
        </div>



      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    <div id="members" class="container marketing mt-5">

      <div class="row">
        <div class="col-lg-4">
          <a href="./kimminsung/profile.html">
            <img src="ì‚¬ì§„/ê¹€ë¯¼ì„±.jpg" class="bd-placeholder-img rounded-circle mb-3"
              style="width: 270px; height: 270px; object-fit: cover; border: 2px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);"
              alt="Placeholder" />
          </a>
          <h2 class="fw-normal">ê¹€ë¯¼ì„±</h2>
          <p>INFP</p>
        </div>

        <div class="col-lg-4">
          <a href="./HyungWo-o/profile.html">
            <img src="ì‚¬ì§„/ê¹€í˜•ìš°.jpg" class="bd-placeholder-img rounded-circle mb-3"
              style="width: 270px; height: 270px; object-fit: cover; border: 2px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1)"
              alt="Placeholder" />
          </a>
          <h2 class="fw-normal">ê¹€í˜•ìš°</h2>
          <p>ISFJ<br>lsì¡°ã„±r ì˜¨ã„·r...â­</p>
        </div>


        <div class="col-lg-4">
          <a href="profile.html">
            <img src="ì‚¬ì§„/ìœ ì§„ì›.jpg" class="bd-placeholder-img rounded-circle mb-3"
              style="width: 270px; height: 270px; object-fit: cover; border: 2px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1)"
              alt="Placeholder" />
          </a>
          <h2 class="fw-normal">ìœ ì§„ì›</h2>
          <p>INTP</p>
        </div>

      </div>

      <div class="row justify-content-center mt-4">

        <div class="col-lg-4 text-center">
          <a href="..">
            <img src="ì‚¬ì§„/ì´ì‹œì˜¨.jpg" class="bd-placeholder-img rounded-circle mb-3"
              style="width: 270px; height: 270px; object-fit: cover; border: 2px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);"
              alt="Placeholder" />
          </a>
          <h2 class="fw-normal">ì´ì‹œì˜¨</h2>
          <p>INFP</p>
        </div>


        <div class="col-lg-4 text-center">
          <a href="profile.html">
            <img src="ì‚¬ì§„/ì¥ê²½í˜.jpg" class="bd-placeholder-img rounded-circle mb-3"
              style="width: 270px; height: 270px; object-fit: cover; border: 2px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);"
              alt="Placeholder" />
          </a>
          <h2 class="fw-normal">ì¥ê²½í˜</h2>
          <p>INFP
            <br>ëŠ¦ì€ ë§Œí¼ ì—´ì‹¬íˆ í•˜ê² ìŠµë‹ˆë‹¤.</br>
          </p>
        </div>

      </div>
    </div>
    <br>
    <!--  ë°©ëª…ë¡ ì‹œì‘ -->
    <section class="container rowmy-5" id="guestbook">
      <div class="d-flex align-items-center mb-3" style="gap: 30rem;">
        <h4 class="mb-0">
          <i class="fa-solid fa-comments"></i> ë°©ëª…ë¡ ëª©ë¡
        </h4>

      </div>
      <div class="row g-4">

        <!-- ğŸ“ ì‘ì„± í¼ ì¹´ë“œ (ì˜¤ë¥¸ìª½) -->
        <div class="col-md-4 order-md-2 d-flex">
          <div class="card shadow-lg border-0 equal-height w-100" style="height: 100%">
            <div class="card-body">
              <h5 class="card-title">
                <i class="fa-solid fa-pen"></i>
                <span class="title-text">ë°©ëª…ë¡ ëª©ë¡</span>
              </h5>
              <div class="mb-3">
                <input type="text" id="name_input" class="form-control" placeholder="ì´ë¦„" maxlength="16"
                  style="width:40%">
              </div>
              <div class="mb-3">
                <textarea id="message_input" class="form-control" rows="4" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
              </div>
              <button id="submitbtn" class="btn btn-dark w-100"><i class="fa-solid fa-paper-plane"></i>
                ì‘ì„±í•˜ê¸°</button>
            </div>
          </div>
        </div>

        <!-- ğŸ“œ ë©”ì‹œì§€ ëª©ë¡ ì¹´ë“œë“¤ (ì™¼ìª½) -->
        <div class="col-md-8 order-md-1 d-flex">
          <div class="card equal-height w-100" style="height: 100%">
            <div id="messages" class="d-flex flex-column gap-3 overflow-auto">
              <!-- ì¹´ë“œ í˜•íƒœ ë©”ì‹œì§€ê°€ JavaScriptë¡œ ì—¬ê¸°ì— ì¶”ê°€ë¨ -->
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- <footer class="container">
      <p class="float-end"><a href="#">Back to top</a></p>
      <p>&copy; 2024 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
    </footer> -->

  </main>
</body>

</html>